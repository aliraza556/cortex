name: MERN Stack
description: MongoDB, Express.js, React, Node.js stack for full-stack JavaScript development
version: 1.0.0
author: Cortex Linux
packages:
  - nodejs
  - npm
  - mongodb
  - git
  - curl

steps:
  - command: apt update
    description: Update package lists
    requires_root: true
  - command: curl -fsSL https://deb.nodesource.com/setup_20.x -o /tmp/nodesource_setup.sh && bash /tmp/nodesource_setup.sh && rm /tmp/nodesource_setup.sh
    description: Download and add Node.js repository
    requires_root: true
  - command: apt install -y nodejs
    description: Install Node.js
    requires_root: true
  - command: npm install -g create-react-app express-generator
    description: Install React and Express generators globally
    requires_root: true
  - command: curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | gpg -o /usr/share/keyrings/mongodb-server-8.0.gpg --dearmor
    description: Import MongoDB GPG key
    requires_root: true
  - command: echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | tee /etc/apt/sources.list.d/mongodb-org-8.0.list
    description: Add MongoDB official apt repository
    requires_root: true
  - command: apt update
    description: Update package lists
    requires_root: true
  - command: apt install -y mongodb-org
    description: Install MongoDB from official repository
    requires_root: true
  - command: systemctl start mongod
    description: Start MongoDB service
    requires_root: true
    rollback: systemctl stop mongod
  - command: systemctl enable mongod
    description: Enable MongoDB on boot
    requires_root: true
    rollback: systemctl disable mongod

hardware_requirements:
  min_ram_mb: 2048
  min_cores: 2
  min_storage_mb: 10240

post_install:
  - echo "MERN stack installed successfully"
  - echo "Node.js version: $(node --version)"
  - echo "npm version: $(npm --version)"
  - echo "React: Create apps with 'npx create-react-app'"
  - echo "MongoDB: mongodb://localhost:27017"

verification_commands:
  - node --version
  - npm --version
  - mongosh --version || mongo --version
  - systemctl is-active mongod
  - npx create-react-app --version

metadata:
  category: web-development
  tags:
    - javascript
    - nodejs
    - mongodb
    - react
    - express

